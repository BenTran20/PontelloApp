@model IEnumerable<PontelloApp.Models.Category>

@{
    ViewData["Title"] = "Categories";
}

<h1>Categories</h1>
<p class="mt-3">
    This page lets you manage main categories and subcategories. 
</p>

<div class="alert alert-info">
    <strong>Tip:</strong> Click “+” to add a subcategory under the main category.
    You can also Edit or Delete categories using the buttons on each item.
</div>

<p>
    <a asp-action="Create" class="btn btn-gray" >
        <i class="bi bi-plus-lg me-1"></i> Create New
    </a>
</p>


<ul class="list-group">
    @foreach (var cat in Model)
    {
        <li class="list-group-item">
            @cat.Name
            <span class="ms-2">
                <a asp-action="Create" asp-route-parentId="@cat.ID"
                   class="btn btn-sm btn-outline-secondary icon-btn me-1" title="Add Subcategory">
                    <i class="bi bi-plus"></i>
                    <span class="btn-text">Subcategory</span>
                </a>

                <a asp-action="Edit" asp-route-id="@cat.ID"
                   class="btn btn-sm btn-outline-primary icon-btn me-1" title="Edit">
                    <i class="bi bi-pencil-square"></i>
                </a>

                <a asp-action="Delete" asp-route-id="@cat.ID"
                   class="btn btn-sm btn-outline-danger icon-btn" title="Delete">
                    <i class="bi bi-trash3"></i>
                </a>
            </span>

            @if (cat.SubCategories.Any())
            {
                <partial name="_CategoryTree" model="cat.SubCategories" />
            }
        </li>
    }
</ul>
