@model IEnumerable<PontelloApp.Models.Product>

@{
    PontelloApp.Models.Vendor vendor = (PontelloApp.Models.Vendor)ViewBag.Vendor;
}

<h1 class="mb-3">Products for Vendor: @vendor.Name</h1>

<partial name="_VendorDetail" model="vendor" />

<table class="table table-hover align-middle shadow-sm">
    <thead class="table-light">
        <tr>
            <th>Product Name</th>
            <th>Handle</th>
            <th>Category</th>
            <th>Type</th>
            <th>Tag</th>
            <th>Variants</th>
            <th>Status</th>
            <th></th>
        </tr>
    </thead>

    <tbody>
        @foreach (var p in Model)
        {
            <tr>
                <td>@p.ProductName</td>
                <td>@p.Handle</td>
                <td>@p.Category?.FullCategory</td>

                <td>@(string.IsNullOrEmpty(p.Type) ? "—" : p.Type)</td>
                <td>@(string.IsNullOrEmpty(p.Tag) ? "—" : p.Tag)</td>

                <td>
                    @(p.Variants?.Count() ?? 0)
                </td>

                <td>
                    @if (p.IsActive)
                    {
                        <span class="badge bg-success">Active</span>
                    }
                    else
                    {
                        <span class="badge bg-secondary">Inactive</span>
                    }
                </td>

                <td class="text-nowrap">
                    <a asp-controller="Products" asp-action="Edit" asp-route-id="@p.ID"
                       style="text-decoration: none"
                       class="btn btn-primary"
                       data-bs-toggle="tooltip"
                       data-bs-placement="top"
                       title="Edit product">
                        Edit
                    </a>

                    <a asp-controller="Products" asp-action="Archive" asp-route-id="@p.ID"
                       class="btn btn-danger"
                       style="text-decoration: none"
                       data-bs-toggle="tooltip"
                       data-bs-placement="top"
                       title="Archive product">
                        Archive
                    </a>
                </td>
            </tr>
        }
    </tbody>
</table>