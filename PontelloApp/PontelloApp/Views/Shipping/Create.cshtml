@model PontelloApp.Models.Order

@{
	ViewData["Title"] = "Shipping Information";
}

<div class="container py-5">
	<h2 class="fw-bold mb-4">Shipping Information</h2>

	@if (TempData["SuccessMessage"] != null)
	{
		<div class="alert alert-success">@TempData["SuccessMessage"]</div>
	}

	<div class="row">
		<div class="col-md-8">
			<form asp-action="Create" asp-controller="Shipping" method="post">
				<input type="hidden" name="orderId" value="@Model.Id" />

				<div class="mb-3">
					<label class="form-label">Address</label>
					<input type="text" name="address" class="form-control" value="@Model.Shipping?.Address" required />
				</div>

				<div class="mb-3">
					<label class="form-label">Phone</label>
					<input type="text" name="phone" class="form-control" value="@Model.Shipping?.Phone" required />
				</div>

				<div class="mb-3">
					<label class="form-label">Email</label>
					<input type="email" name="email" class="form-control" value="@Model.Shipping?.Email" required />
				</div>

				<button type="submit" class="btn btn-dark">Confirm</button>
			</form>
		</div>

		<div class="col-md-4">
			<div class="card p-3 shadow-sm">
				<h5 class="fw-bold mb-3">Order Summary</h5>
				<div class="d-flex justify-content-between mb-2">
					<span>Items:</span>
					<span>@Model.Items.Sum(i => i.Quantity)</span>
				</div>
				<div class="d-flex justify-content-between mb-2">
					<span>Subtotal:</span>
					<span>$@Model.Items.Sum(i => i.TotalPrice)</span>
				</div>
				<div class="d-flex justify-content-between mb-2">
					<span>Tax (13%):</span>
					<span>$@Math.Round(Model.Items.Sum(i => i.TotalPrice) * 0.13m, 2)</span>
				</div>
				<hr />
				<div class="d-flex justify-content-between fw-bold fs-5">
					<span>Total:</span>
					<span>$@Math.Round(Model.Items.Sum(i => i.TotalPrice) + Math.Round(Model.Items.Sum(i => i.TotalPrice) * 0.13m, 2), 2)</span>
				</div>
			</div>
		</div>
	</div>
</div>
