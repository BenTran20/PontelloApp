@model IEnumerable<PontelloApp.Models.Product>

<form asp-action="Index" method="get">
    <div class="container mt-4">
        <div class="row">

            <div class="col-md-3">
                <div class="card shadow-sm p-3">

                    <!-- SEARCH -->
                    <div class="mb-3">
                        <label for="SearchString" class="form-label fw-semibold">Search</label>
                        <div class="input-group">
                            @Html.TextBox("SearchString", null, new { @class = "form-control", placeholder = "SKU or product name" })
                            <button class="btn btn-outline-secondary" type="submit">
                                <em class="bi bi-search" aria-hidden="true"></em>
                                <span class="visually-hidden">Search</span>
                            </button>

                        </div>
                    </div>

                    <!-- SORT -->
                    <fieldset class="mb-3">
                        <legend class="form-label fw-semibold fs-6">Sort</legend>

                        <div class="d-flex gap-2">
                            <button type="submit" name="actionButton" value="A-Z"
                                    class="btn btn-outline-secondary btn-sm w-100">
                                A–Z
                            </button>
                            <button type="submit" name="actionButton" value="Z-A"
                                    class="btn btn-outline-secondary btn-sm w-100">
                                Z–A
                            </button>
                        </div>
                    </fieldset>


                    <!-- CATEGORY -->
                    <div class="mb-3">
                        <label for="CategoryID" class="form-label fw-semibold">Category</label>
                        @Html.DropDownList("CategoryID", null, "All categories", new { @class = "form-select", id = "CategoryID" })
                    </div>

                    <button type="submit" class="btn btn-blue w-100 mb-2">Apply</button>

                    <hr />
                </div>
            </div>


            <!-- PRODUCT LIST -->
            <div class="col-md-9">

                <div class="d-flex justify-content-between mb-3">
                    <h4>Products</h4>
                    <small class="text-muted">
                        @ViewData["TotalItems"] items
                    </small>
                </div>

                <div class="row row-cols-1 row-cols-md-3 row-cols-lg-3 g-3">

                    @foreach (var item in Model)
                    {
                        <div class="col">
                            <div class="card h-100 shadow-sm product-card-hover">

                                <!-- CARD BODY -->
                                <div class="card-body">
                                    <!-- PRODUCT NAME -->
                                    <h4 class="card-title">
                                        <a asp-action="Details"
                                           asp-route-id="@item.ID"
                                           class="text-decoration-none text-dark fw-bold">
                                            @item.ProductName
                                        </a>
                                    </h4>

                                    <!-- VENDOR -->
                                    <p class="card-text text-muted small mb-2">
                                        @item.Vendor
                                    </p>

                                    <!-- CATEGORY -->
                                    <span class="badge bg-primary">
                                        @item.Category?.Name
                                    </span>
                                </div>

                                <!-- CARD FOOTER - ADD TO CART BUTTON -->
                                <div class="card-footer bg-white border-0">
                                    <a asp-action="Details"
                                       asp-route-id="@item.ID"
                                       class="btn btn-outline-secondary w-100">
                                        <i class="bi bi-cart-plus me-1"></i> Add to Cart
                                    </a>
                                </div>

                            </div>
                        </div>
                    }
                </div>

                <partial name="_PagingNavBar" />

            </div>

        </div>
    </div>
</form>
