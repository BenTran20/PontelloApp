@model PontelloApp.Models.Order

@{
    ViewData["Title"] = "Order Confirmed";
}

<div class="container py-5">
    <h2 class="fw-bold mb-4">Order Confirmed - @Model.PONumber</h2>

    <div class="row">

        <!-- LEFT SIDE: Order Items -->
        <div class="col-lg-8">
            @foreach (var item in Model.Items)
            {
                <div class="card mb-2 p-2">
                    <h6>@item.Product?.ProductName</h6>
                    @if (item.ProductVariant != null && item.ProductVariant.Options.Any())
                    {
                        <small class="text-muted">
                            @string.Join(" / ", item.ProductVariant.Options.Select(o => $"{o.Name}: {o.Value}"))
                        </small>
                    }
                    <p>@item.Quantity x $@item.UnitPrice = $@item.TotalPrice</p>
                </div>
            }
        </div>

        <!-- RIGHT SIDE: Summary -->
        <div class="col-lg-4">
            <div class="card p-3 shadow-sm">
                <h5 class="fw-bold mb-3">Order Summary</h5>

                <div class="d-flex justify-content-between mb-2">
                    <span>Subtotal:</span>
                    <span>$@Model.Items.Sum(i => i.TotalPrice)</span>
                </div>
                <div class="d-flex justify-content-between mb-2">
                    <span>Tax (13%):</span>
                    <span>$@Model.TaxAmount</span>
                </div>
                <hr />
                <div class="d-flex justify-content-between fw-bold fs-5 mb-3">
                    <span>Total:</span>
                    <span>$@Model.TotalAmount</span>
                </div>

                <a asp-controller="Home" asp-action="Index" class="btn btn-dark w-100 py-2">
                    Back to Home
                </a>
            </div>
        </div>

    </div>
</div>
